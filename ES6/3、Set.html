<!Doctype html>
<html>
    <head>
        <meta charset="UTF-8"/>
        <title>Set数据结构</title>
    </head>
    <body>
        <script>
            //  ES6提供了新的数据结构 Set, 它类似于数组，但是成员的值都是唯一的，没有重复的值。
            //  Set 本身是一个构造函数, 用来生成 Set 数据结构


            const s = new Set();

            [2, 3, 5, 4, 5, 2, 2].forEach(x => s.add(x));

            for (let i of s) {
                console.log(i);
            }
            // 2 3 5 4      通过add方法向 Set 结构加入成员，结果表明 Set 结构不会添加重复的值。



            let arr = [3,1,1]
            let unique = [...new Set(arr)]
            console.log(unique)                 //   [3,1]  数组去重的好方法
            let set = new Set([1,2,3])
            console.log(set, set.size)          //  Set(3) {1, 2, 3}
            console.log([...set])               //  [1,2,3]
//          console.log(new Set(arr).map(item => item*2))   报错，因为它并不是数组，是没有map方法的



            let set1 = new Set();
            let a = NaN;
            let b = NaN;
            set1.add(a);
            set1.add(b);
            console.log(set1)         // Set {NaN}    说明在Set里NaN等于NaN



//          Set结构实例的属性和方法
            let s1 = new Set()
            s1.add(1).add(2).add(2);
            // 注意2被加入了两次

            s1.size  // 2

            s1.has(1)  // true
            s1.has(2)  // true
            s1.has(3)  // false

            s1.delete(2);
            s1.has(2)  // false
            s1.clear()



//          Array.from方法可以将 Set 结构转为数组,  数组去重的另一个好方法
            const items = new Set([1, 2, 3, 4, 5]);
            const array = Array.from(items);
            function dedupe(array) {
                return Array.from(new Set(array));
            }
            dedupe([1, 1, 2, 3]) // [1, 2, 3]



//          Set 结构的实例有四个遍历方法，可以用于遍历成员。 遍历顺序就是插入顺序
//          keys(), values(), entries(), forEach()
            let set2 = new Set(['red', 'green', 'blue']);

            for (let item of set2.keys()) {
                console.log(set2.keys(), item);     //  red, green, blue
            }

            for (let item of set2.values()) {
                console.log(set2.values(), item);      //  red, green, blue
            }

            for (let item of set2.entries()) {
                console.log(set2.entries(), item);
            }



//          Set实现交集、并集、差集
            let c = new Set([1, 2, 3]);
            let d = new Set([4, 3, 2]);

            // 并集
            let union = new Set([...c, ...d]);
            // Set {1, 2, 3, 4}

            // 交集
            let intersect = new Set([...c].filter(x => d.has(x)));
            // set {2, 3}

            // 差集
            let difference = new Set([...c].filter(x => !d.has(x)));
            // Set {1}
        </script>
    </body>
</html>